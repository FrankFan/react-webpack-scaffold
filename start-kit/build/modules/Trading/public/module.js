webpackJsonp([1],{0:function(t,e,a){t.exports=a(112)},22:function(t,e,a){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(5),s=function(e){function a(){t(this,a);var e={lifeTime:"1D",key:"invest_voucher_key"};return n(this,Object.getPrototypeOf(a).call(this,e))}return i(a,e),a}(o.SessionCache),r=function(e){function a(){t(this,a);var e={lifeTime:"1D",key:"finance_trade_confirm_key"};return n(this,Object.getPrototypeOf(a).call(this,e))}return i(a,e),a}(o.SessionCache),l=function(e){function a(){t(this,a);var e={lifeTime:"1D",key:"finance_pay_confirm_key"};return n(this,Object.getPrototypeOf(a).call(this,e))}return i(a,e),a}(o.SessionCache),c={InvestVoucherCache:s.getInstance(),TradeConfirmCache:r.getInstance(),PayConfirmCache:l.getInstance()};e["default"]=c}).call(this)}finally{}},32:function(t,e,a){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(5),o=function(){function e(a){t(this,e),this.moduleName=a}return n(e,[{key:"getContract",value:function(t,e,a){i.Http.get(t,e,a)}},{key:"checkUser",value:function(t,e,a){var n={url:"/m-h5/service/product/user-check",query:{}};n.query=Object.assign(n.query,t),i.Http.get(n,e,a)}},{key:"checkInvest",value:function(t,e,a){var n={url:"/m-trading/service/trade/invest-check",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"getTradeConfirmInfo",value:function(t,e,a){var n={url:"/m-trading/service/trade/trade-info",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"getPaymentInfo",value:function(t,e,a){var n={url:"/m-trading/service/trade/get-payment-info",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"getOtpType",value:function(t,e,a){var n={url:"/m-trading/service/trade/get-otp-type",query:{}};n.query=Object.assign(n.query,t),i.Http.get(n,e,a)}},{key:"sendTradeOtp",value:function(t,e,a){var n={url:"/m-trading/service/trade/send-otp",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"sendQuickPayTradeOtp",value:function(t,e,a){var n={url:"/m-trading/service/trade/quick-pay/send-otp",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"authQuickPayOtpResult",value:function(t,e,a){var n={url:"/m-trading/service/trade/quick-pay/auth-result",query:{},isShowLoading:"0"};n.query=Object.assign(n.query,t),i.Http.get(n,e,a)}},{key:"getQuickPayAvailableBank",value:function(t,e,a){var n={url:"/m-trading/service/trade/quick-pay/get-available-bank",query:{}};n.query=Object.assign(n.query,t),i.Http.get(n,e,a)}},{key:"verifyQuickPayBankInfo",value:function(t,e,a){var n={url:"/m-trading/service/trade/quick-pay/verify-bank-info",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"sendInvestRequest",value:function(t,e,a){var n={url:"/m-trading/service/trade/invest-request",body:{}};n.body=Object.assign(n.body,t),i.Http.post(n,e,a)}},{key:"getInvestResult",value:function(t,e,a){var n={url:"/m-trading/service/trade/invest-result",query:{}};n.query=Object.assign(n.query,t),i.Http.get(n,e,a)}}]),e}();e["default"]=new o("trading")}).call(this)}finally{}},80:2,92:function(t,e){},93:92,94:92,95:92,104:16,112:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}var e=a(1),n=t(e),i=a(78),o=t(i),s=a(25),r=a(45),l=t(r),c=a(114),u=t(c),d=a(5),h=a(113),f=t(h),p=a(117),m=t(p),y=a(116),v=t(y),b=a(118),k=t(b),C=a(115),g=t(C),w=function(){l["default"].attach(document.body),o["default"].render(n["default"].createElement(s.Router,{history:s.hashHistory},n["default"].createElement(s.Route,{path:"/",component:d.AppContainer},n["default"].createElement(s.IndexRoute,{component:u["default"],sharable:!0}),n["default"].createElement(s.Route,{path:"/home",component:u["default"]}),n["default"].createElement(s.Route,{path:"/contract",component:f["default"],sharable:!1}),n["default"].createElement(s.Route,{path:"/tradeconfirm",component:m["default"],sharable:!1}),n["default"].createElement(s.Route,{path:"/payconfirm",component:v["default"],sharable:!1}),n["default"].createElement(s.Route,{path:"/tradeResult",component:k["default"],sharable:!1}),n["default"].createElement(s.Route,{path:"/investmentVoucher",component:g["default"],sharable:!1}))),document.getElementById("app"))};w()}).call(this)}finally{}},113:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),l=t(r),c=a(5),u=c.BCs.Contract,d=function(t){function e(t){n(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t));return a.data={},a}return o(e,t),s(e,[{key:"componentWillMount",value:function(){this.getInitData(),this.setTitle({naviBar:{title:"平台免责声明"===this.data.title?this.data.title:"相关协议"},leftView:!0}),window.scrollTo(0,0)}},{key:"getInitData",value:function(){var t=this.getState();this.data.title=t.title,this.data.type=t.type,this.data.link=t.link,this.data.html=t.html}},{key:"render",value:function(){var t=l["default"].createElement(u,{type:this.data.type,link:this.data.link,html:this.data.html});return l["default"].createElement("section",{className:"ContractPage"},t)}}]),e}(c.LuPage);e["default"]=d}).call(this)}finally{}},114:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(92);var r=a(1),l=t(r),c=a(25),u=a(5),d=function(t){function e(){return n(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),s(e,[{key:"componentWillMount",value:function(){this.setTitle({naviBar:{title:"Home"}})}},{key:"render",value:function(){return l["default"].createElement("div",{className:"Home"},l["default"].createElement("div",{className:"Home-container"},l["default"].createElement("ul",null,l["default"].createElement("li",null,l["default"].createElement(c.Link,{to:"/tradeConfirm?channel=H5_Other&from=https%3A%2F%2Fwww.baidu.com&params=%7B%22productId%22%3A13418762%2C%22amount%22%3A10000%2C%22source%22%3A%22H5_OTHER%22%2C%22channel%22%3A%220%22%2C%22salesArea%22%3A%22%22%2C%22productCategory%22%3A%22806%22%7D"},"投资确认")),l["default"].createElement("li",null,l["default"].createElement(c.Link,{to:"/payConfirm"},"支付确认")),l["default"].createElement("li",null,l["default"].createElement(c.Link,{to:"/tradeResult"},"投资结果页")),l["default"].createElement("li",null,l["default"].createElement(c.Link,{to:"/contract"},"合同协议")),l["default"].createElement("li",null,l["default"].createElement(c.Link,{to:"/investmentVoucher"},"投资券组件")))))}}]),e}(u.LuPage);e["default"]=d}).call(this)}finally{}},115:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(1),l=t(r),c=a(5),u=a(22),d=t(u),h=c.BCs.SelectInvestmentVoucher,f=function(t){function e(t){n(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t));return["allCheckCallback","btnClickCallback","itemCheckCallback","errorCallback"].forEach(function(t){a[t]=a[t].bind(a)}),a.investVoucherCache=d["default"].InvestVoucherCache,a.data={},a}return o(e,t),s(e,[{key:"componentWillMount",value:function(){var t={naviBar:{title:"选择投资券"},leftView:!0};this.setTitle(t),this.getInitData()}},{key:"getInitData",value:function(){var t=this.getState();this.data.list=t.list,this.data.maxCoinUseAmount=t.maxCoinUseAmount,this.data.maxCoinUseCount=t.maxCoinUseCount,this.data.paymentAmount=t.paymentAmount}},{key:"allCheckCallback",value:function(){console.log("allCheckCallback")}},{key:"btnClickCallback",value:function(t,e){this.investVoucherCache.set({hasChoickInvestVoucher:t>0,investVoucherAmount:t,investVoucherList:e}),this.back()}},{key:"itemCheckCallback",value:function(){console.log("itemCheckCallback")}},{key:"errorCallback",value:function(t){this.showToast(t)}},{key:"render",value:function(){var t={list:this.data.list,maxCoinUseAmount:this.data.maxCoinUseAmount,maxCoinUseCount:this.data.maxCoinUseCount,paymentAmount:this.data.paymentAmount,errorCallback:this.errorCallback,allCheckCallback:this.allCheckCallback,btnClickCallback:this.btnClickCallback,itemCheckCallback:this.itemCheckCallback};return l["default"].createElement(h,t)}}]),e}(c.LuPage);e["default"]=f}).call(this)}finally{}},116:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(93);var r=a(1),l=t(r),c=a(32),u=t(c),d=a(22),h=t(d),f=a(80),p=t(f),m=a(104),y=t(m),v=a(5),b=a(!function(){var t=new Error('Cannot find module "luui"');throw t.code="MODULE_NOT_FOUND",t}()),k=v.Utils.ValidateUtils,C=v.Utils.CurrencyUtils,g=v.Utils.CommonUtils,w=v.Utils.Statistic,P=v.BCs.ListItem,O=v.BCs.InputOTP,T=v.BCs.InputIcon,I=v.BCs.InputPassword,D=function(t){function e(t){n(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t));return a.payConfirmCache=h["default"].PayConfirmCache,["otpNoInputChangeCallback","clickOtpCallback","otpNoCountDownStartCallback","otpNoCountDownStopCallback","switchToVoice","bankNoInputChangeCallback","clickBankIconCallback","telNoInputChangeCallback","clickTelIconCallback","quickPayOtpNoInputChangeCallback","clickQuickPayOtpCallback","quickPayOtpNoCountDownStartCallback","quickPayOtpNoCountDownStopCallback","tradePwdInputFilter","tradePwdChangeCallback","setPwdInputFilter","setPwdChangeCallback","goToPayCallback"].forEach(function(t){a[t]=a[t].bind(a)}),a.state={isDataReady:!1,titleName:"确认支付",paymentMethod:[],isSetPassword:"1",itemData:[],otpData:{otpType:"",dynamicType:"",isVoiceOTP:!1,voicePhoneNo:"",otpMobileNo:"",otpInactive:!0,otpCountdown:!1,otpCountdownSeconds:0,showOtpFeedback:!1,otpReset:!1},btnActiveStatus:!1},a.data={},a}return o(e,t),s(e,[{key:"getPaymentMethod",value:function(){var t="";return this.state.paymentMethod.indexOf("balance")>=0&this.state.paymentMethod.indexOf("withhold")>=0?t="2":this.state.paymentMethod.indexOf("balance")>=0?t="1":this.state.paymentMethod.indexOf("withhold")>=0?t="2":this.state.paymentMethod.indexOf("quickpay")>=0&&(t="3"),t}},{key:"componentWillMount",value:function(){window.scrollTo(0,0);var t={naviBar:{title:"确认支付"},leftView:!0};this.setTitle(t),this.getInitData(),this.getOtpType(),this.getSupportBanks()}},{key:"getInitData",value:function(){var t=this.getState();this.data.payment=t.payment,this.state.isSetPassword=t.isSetPassword,this.data.supportedMethods=t.supportedMethods,this.data.paymentAmount=t.paymentAmount,this.data.coins=t.coins,this.data.sid=t.sid,this.data.source=t.source,this.data.productId=t.productId,this.data.productCategory=t.productCategory,this.data.ver=t.ver,this.setViewData(this.data.payment)}},{key:"setViewData",value:function(t){var e=null,a=null,n=null;this.data.paymentData={};for(var i=0;i<t.length;i++){var o=t[i].paymentMethod,s="1"===t[i].isPaymentTypeValid;"1"===o&&s?(this.state.paymentMethod.push("balance"),e={title:t[i].paymentDisplay,subtitle:t[i].availableAmountDisplay||"陆金所",message:t[i].amountDisplay,messageUnit:""},this.state.itemData.push(e),this.data.paymentData.balance=t[i]):"2"===o&&s?(this.state.paymentMethod.push("withhold"),a={title:t[i].paymentDisplay,subtitle:t[i].availableAmountDisplay,message:t[i].amountDisplay,messageUnit:""},this.state.itemData.push(a),this.data.paymentData.withhold=t[i]):"3"===o&&(this.state.paymentMethod.push("quickpay"),n={title:t[i].paymentDisplay,message:C.formatCurrencyWithTwoDecimal(this.data.paymentAmount),messageUnit:"元"},this.state.itemData.push(n),this.data.paymentData.quickpay=t[i])}this.setState(this.state);var r="",l=this.state.paymentMethod,c=l.indexOf("balance")>=0,u=l.indexOf("withhold")>=0,d=l.indexOf("quickpay")>=0;c&&u?r="h5_balancebankcardpayment":c?r="h5_balancepayment":u?r="h5_bankcardpayment":d&&(r="h5_quickpayment"),w.logPage({title:r,category:this.props.route.path})}},{key:"getOtpType",value:function(){var t=this,e=this.state.paymentMethod,a="1"===this.state.isSetPassword;if(e.indexOf("quickpay")<0&&a){var n="C01"===this.data.productCategory;u["default"].getOtpType({channel:n?"investPE":"setTradingPwd"},function(e){t.state.otpData.otpType=e.result.otpType,t.state.otpData.dynamicType=e.result.dynamicType,t.state.otpData.isVoiceOTP="3"===e.result.dynamicType,e.result.phoneNo&&(t.state.otpData.voicePhoneNo=e.result.phoneNo.replace(/\ /g,"-")),t.state.otpData.waitTime=e.result.waitTime,t.state.otpData.otpCountdownSeconds=+e.result.countdownSeconds})}}},{key:"getSupportBanks",value:function(){var t=this,e=this.state.paymentMethod;e.indexOf("quickpay")>=0&&u["default"].getQuickPayAvailableBank({},function(e){t.payConfirmCache.setAttr("avail_bank",e.result.data)})}},{key:"getSupportBanksText",value:function(){var t=this.payConfirmCache.getAttr("avail_bank"),e=this.bulidSupportBanks(t),a=l["default"].createElement("ul",{className:"PayConfirm-banks-text"},l["default"].createElement("li",null,"请填写以您本人姓名开户的借记卡"),l["default"].createElement("li",null,"目前支持的银行： ",e),l["default"].createElement("li",null,"支付成功后， 该卡将作为您在陆金所唯一的资金进出卡， 请谨慎填写 "));return a}},{key:"bulidSupportBanks",value:function(t){var e=t,a="",n="";if(e.length>0)for(var i=0;i<e.length;i++)a=e[i].bankName,i!==e.length-1&&(a+="，"),n+=a;return n}},{key:"getReservePhone",value:function(){return l["default"].createElement("div",{className:"PayConfirm-phone-text"},"银行预留的手机号是办理该银行卡时填写的手机号。 没有预留、 忘记或停用手机号的， 请联系银行客服更新处理")}},{key:"otpNoInputChangeCallback",value:function(t){this.data.otpValue=t,this.data.otpValueStatus=!!t,this.state.otpData.otpInactive=!t,this.checkBtnStatus()}},{key:"clickOtpCallback",value:function(){var t="",e=this.state.paymentMethod,a=e.indexOf("balance")>=0,n=e.indexOf("withhold")>=0;a&&n?t="h5_balancebankcardpayment_getotp":a?t="h5_balancepayment_getotp":n&&(t="h5_bankcardpayment_getotp"),w.logEvent({title:t,category:this.props.route.path}),this.sendTradeOtp()}},{key:"switchToVoice",value:function(){this.state.otpData.otpReset=!0,this.state.otpData.isVoiceOTP=!0,this.sendTradeOtp()}},{key:"sendTradeOtp",value:function(){var t=this,e="C01"===this.data.productCategory;u["default"].sendTradeOtp({isVoiceOTP:this.state.otpData.isVoiceOTP,otpChannel:e?"investPE":"setTradingPwd",isSetPassword:this.state.isSetPassword,paymentAmount:this.data.paymentAmount||"",productName:this.data.productName||""},function(e){t.state.otpData.otpMobileNo=e.result.mobileNo,t.state.otpData.otpCountdown=!0,t.state.otpData.otpInactive=!0,t.setState({otpData:t.state.otpData})})}},{key:"bankNoInputChangeCallback",value:function(t){this.data.bankNo=t,this.data.bankNoStatus=!!t,this.checkBtnStatus()}},{key:"telNoInputChangeCallback",value:function(t){this.data.reserveMobile=t,this.data.reserveMobileStatus=!!t,this.checkBtnStatus()}},{key:"quickPayOtpNoInputChangeCallback",value:function(t){this.data.otpValue=t,this.data.otpValueStatus=!!t,this.state.otpData.otpInactive=!t,this.checkBtnStatus()}},{key:"clickBankIconCallback",value:function(){var t=this.getSupportBanksText(),e={title:"银行卡说明",text:t,buttons:[{label:"确定",onClick:this.hideDialog}]};this.showDialog(e)}},{key:"clickTelIconCallback",value:function(){var t=this.getReservePhone(),e={title:"预留手机号说明",text:t,buttons:[{label:"确定",onClick:this.hideDialog}]};this.showDialog(e)}},{key:"otpNoCountDownStartCallback",value:function(){this.state.otpData.showOtpFeedback=!0,this.setState(this.state)}},{key:"otpNoCountDownStopCallback",value:function(){this.state.otpData.otpCountdown=!1,this.state.otpData.otpInactive=!1,this.state.otpData.otpReset=!1}},{key:"quickPayOtpNoCountDownStartCallback",value:function(){}},{key:"quickPayOtpNoCountDownStopCallback",value:function(){this.state.otpData.otpCountdown=!1,this.state.otpData.otpInactive=!1}},{key:"clickQuickPayOtpCallback",value:function(){var t=this,e=this.data.bankNo||"",a=k.validCardNo(e);if(a!==!0)return void this.showToast(a);var n=this.data.reserveMobile||"",i=k.validateMobile(n);if(i!==!0)return void this.showToast(i);var o=this.state.paymentMethod,s=o.indexOf("quickpay")>=0;s&&w.logEvent({title:"h5_quickpayment_getotp",category:this.props.route.path}),u["default"].verifyQuickPayBankInfo({bankAccount:this.data.bankNo},function(e){console.log("verify bank:",e),"0000"===e.code&&t.sendQuickPayTradeOtp()})}},{key:"sendQuickPayTradeOtp",value:function(){var t=this;u["default"].sendQuickPayTradeOtp({bankAccount:this.data.bankNo,mobileNo:this.data.reserveMobile,sid:this.data.sid,productId:this.data.productId,amount:this.data.paymentAmount},function(e){t.data.responseNo=e.result.responseNo,t.data.authQuickPayOtpResultStartTime=Date.now(),t.showLoading(),t.authQuickPayOtpResult()})}},{key:"authQuickPayOtpResult",value:function(){var t=this;u["default"].authQuickPayOtpResult({responseNo:this.data.responseNo},function(e){if("1"===e.result.status)if(t.data.authQuickPayOtpResultEndTime=Date.now(),t.data.authQuickPayOtpResultEndTime-t.data.authQuickPayOtpResultStartTime>15e3){t.hideLoading();var a={title:"",text:"信息提交失败，是否要重新提交？",buttons:[{label:"取消",onClick:t.hideDialog},{label:"重新提交",onClick:function(){t.data.authQuickPayOtpResultStartTime=Date.now(),t.showLoading(),t.authQuickPayOtpResult(),t.hideDialog()}}]};t.showDialog(a)}else setTimeout(function(){t.authQuickPayOtpResult()},3e3);else"2"===e.result.status?(t.hideLoading(),t.handleQuickOtpError(e.result.authResultCode)):"3"===e.result.status&&(t.hideLoading(),t.state.otpData.otpMobileNo=t.data.reserveMobile,t.state.otpData.otpCountdownSeconds=60,t.state.otpData.otpCountdown=!0,t.state.otpData.otpInactive=!0,t.state.otpData.showOtpFeedback=!0,t.setState({otpData:t.state.otpData}))})}},{key:"handleQuickOtpError",value:function(t){var e="",a="";switch(t){case"PBB02":e="该银行卡余额不足",a="Card";break;case"PBB101":e="手机号与银行预留的不一致",a="Phone";break;case"PBB102":e="动态码错误",a="Code";break;case"PBB15":e="支付金额超过银行卡交易限额，无法支付",a="Card";break;case"PBB16":case"PBB43":e="暂不支持该卡支付，请使用其他银行卡",a="Card";break;case"PBB34":case"PBB35":e="该卡开户信息与您的信息不匹配",a="Card";break;case"PBB74":case"PBB90":case"PBBXX":e="系统异常，请稍后再试",a="Other";break;default:a=""}console.log(a),this.showToast(e)}},{key:"tradePwdInputFilter",value:function(t){return this.data.tradePwdText=t,!0}},{key:"tradePwdChangeCallback",value:function(t){this.data.tradePwd=t,this.data.tradePwdStatus=!!t;var e=k.validateTradePassword(this.data.tradePwdText);e===!0?this.data.tradePwdStatus=!0:this.data.tradePwdStatus=!1,this.checkBtnStatus()}},{key:"setPwdInputFilter",value:function(t){return this.data.setPwdText=t,!0}},{key:"setPwdChangeCallback",value:function(t){this.data.setPwd=t;var e=k.validateTradePassword(this.data.setPwdText);e===!0?this.data.setPwdStatus=!0:this.data.setPwdStatus=!1,this.checkBtnStatus()}},{key:"checkBtnStatus",value:function(){var t=this.state.paymentMethod,e="1"===this.state.isSetPassword,a=t.indexOf("balance")>=0,n=t.indexOf("withhold")>=0,i=t.indexOf("quickpay")>=0,o=!1;a&&n?o=e?!!this.data.otpValueStatus&&!!this.data.setPwdStatus:!!this.data.tradePwdStatus:a?o=e?!!this.data.otpValueStatus&&!!this.data.setPwdStatus:!!this.data.tradePwdStatus:n?o=e?!!this.data.otpValueStatus&&!!this.data.setPwdStatus:!!this.data.tradePwdStatus:i&&(o=e?!!(this.data.bankNoStatus&&this.data.reserveMobileStatus&&this.data.otpValueStatus&&this.data.setPwdStatus):!!(this.data.bankNoStatus&&this.data.reserveMobileStatus&&this.data.otpValueStatus&&this.data.tradePwdStatus)),this.setState({btnActiveStatus:o})}},{key:"goToPayCallback",value:function(){var t=this,e="",a=this.state.paymentMethod,n=a.indexOf("balance")>=0,i=a.indexOf("withhold")>=0,o=a.indexOf("quickpay")>=0;if(n&&i?e="h5_balancebankcardpayment_confirmingpayment":n?e="h5_balancepayment_confirmingpayment":i?e="h5_bankcardpayment_confirmingpayment":o&&(e="h5_quickpayment_confirmingpayment"),w.logEvent({title:e,category:this.props.route.path}),"undefined"!=typeof this.data.otpData&&!o){var s=k.validateOtp(this.data.otpValue);if(s!==!0)return void this.showToast(s)}var r="1"===this.state.isSetPassword?this.data.setPwdText:this.data.tradePwdText;if("undefined"!=typeof r){var l=k.validateTradePassword(r);if(l!==!0)return void this.showToast(l)}u["default"].sendInvestRequest({sid:this.data.sid,coinString:this.data.coins,from:this.data.source,password:"1"===this.state.isSetPassword?this.data.setPwd:this.data.tradePwd,otpType:this.state.otpData.otpType,otpValidationCode:this.data.otpValue,paymentMethod:this.getPaymentMethod(),productId:this.data.productId,isSetPassword:this.state.isSetPassword,productCategory:this.data.productCategory,supportedMethods:this.data.supportedMethods,validCode:this.data.otpValue||"",responseNo:this.data.responseNo||"",bankAccount:this.data.bankNo||"",bankMobileNo:this.data.reserveMobile||""},function(e){"0000"===e.code&&t.forward("tradeResult",{state:{trxId:e.result.trxId,source:t.data.source,ver:t.data.ver,investmentRequestId:e.result.investmentRequestId,salesArea:""}})})}},{key:"render",value:function(){var t=this.state,e=t.paymentMethod,a=t.itemData,n=t.btnActiveStatus,i="1"===this.state.isSetPassword,o=this.state.otpData,s=o.dynamicType,r=o.isVoiceOTP,c=o.voicePhoneNo,u=o.otpMobileNo,d=o.otpInactive,h=o.otpCountdown,f=o.otpCountdownSeconds,m=o.showOtpFeedback,v=o.otpReset,k=(e.indexOf("balance")>=0,e.indexOf("withhold")>=0),C=e.indexOf("quickpay")>=0,w=k||C,D=null;a.length&&(D=l["default"].createElement("div",{className:"PayConfirm-list"},l["default"].createElement(P,{rowsData:a})));var E=l["default"].createElement("div",{className:(0,p["default"])(m?"":"hidden")},l["default"].createElement("div",{className:(0,p["default"])("PayConfirm-otp-text","flex-hrz",r?"hidden":"")},l["default"].createElement("div",{className:"flex-init"},"动态码已发送至",g.getMobile(u)),"1"===s?l["default"].createElement("div",{className:"flex-full button"},"收不到？",l["default"].createElement("span",{className:"PayConfirm-otp-switch",onClick:this.switchToVoice},"语音获取")):null),l["default"].createElement("div",{className:(0,p["default"])("PayConfirm-otp-voice","flex-init",r?"":"hidden")},"陆金所将用",c,"拨打您的手机告知动态码")),N=null;!C&&i&&(N=l["default"].createElement("div",{className:"PayConfirm-otp"},l["default"].createElement(O,{inactive:d,countdown:h,countdownSeconds:f,reset:v,placeholder:"7位数字",inputChangeCallback:this.otpNoInputChangeCallback,countDownStartCallback:this.otpNoCountDownStartCallback,countDownStopCallback:this.otpNoCountDownStopCallback,clickOtpCallback:this.clickOtpCallback}),E));var S=l["default"].createElement("div",{className:(0,p["default"])(m?"":"hidden")},l["default"].createElement("div",{className:(0,p["default"])("PayConfirm-otp-text","flex-hrz")},l["default"].createElement("div",{className:"flex-init"},"动态码已发送至",g.getMobile(u)))),x=null;C&&(x=l["default"].createElement("div",null,l["default"].createElement("div",{className:"PayConfirm-quickpay line-topbottom"},l["default"].createElement(T,{className:"Custom-Line PayConfirm-bankno",labelName:"银行卡号",placeholder:"您的储蓄卡卡号",inputChangeCallback:this.bankNoInputChangeCallback,clickIconCallback:this.clickBankIconCallback}),l["default"].createElement(T,{className:"Custom-Line PayConfirm-telno",labelName:"手机号",placeholder:"银行预留的手机号",inputChangeCallback:this.telNoInputChangeCallback,clickIconCallback:this.clickTelIconCallback}),l["default"].createElement(O,{className:"Custom-Line PayConfirm-otpno",inactive:d,countdown:h,countdownSeconds:f,placeholder:"",inputChangeCallback:this.quickPayOtpNoInputChangeCallback,countDownStartCallback:this.quickPayOtpNoCountDownStartCallback,countDownStopCallback:this.quickPayOtpNoCountDownStopCallback,clickOtpCallback:this.clickQuickPayOtpCallback})),S));var _=null;i||(_=l["default"].createElement("div",{className:"PayConfirm-haspwd"},l["default"].createElement("div",{className:"PayConfirm-pwd"},l["default"].createElement(I,{className:"Custom-Line Password",labelName:"交易密码",placeholder:"输入陆金所交易密码",inputFilter:this.tradePwdInputFilter,inputChangeCallback:y["default"].debounce(this.tradePwdChangeCallback,200)}))));var j=null;i&&(j=l["default"].createElement("div",{className:"PayConfirm-nopwd"},l["default"].createElement("div",{className:"PayConfirm-pwdtext"},l["default"].createElement("div",{className:"PayConfirm-pwdtext-tip1"},"设置陆金所交易密码"),l["default"].createElement("div",{className:"PayConfirm-pwdtext-tip2"},"必须与登录密码不同，为了保护账户及资金安全请牢记")),l["default"].createElement("div",{className:"PayConfirm-pwd"},l["default"].createElement(I,{className:"Password",showPassword:!0,placeholder:"6-16位字母、数字或符号的组合",inputFilter:this.setPwdInputFilter,inputChangeCallback:y["default"].debounce(this.setPwdChangeCallback,200)}))));var B=l["default"].createElement("div",{className:(0,p["default"])("PayConfirm-btn")},l["default"].createElement(b.Button,{name:"立即支付",inactive:!n,className:"ButtonPage-button",callback:this.goToPayCallback})),R=l["default"].createElement("div",{className:(0,p["default"])("PayConfirm-tip",w?"":"hidden")},l["default"].createElement("span",null,"温馨提示：请确保您的银行卡金额足够"));return l["default"].createElement("div",{className:"PayConfirm"},l["default"].createElement("div",{className:"PayConfirm-content"},D,N,x,_,j,B,R))}}]),e}(v.LuPage);e["default"]=D}).call(this)}finally{}},117:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=function P(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:P(i,e,a)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(a)};a(94);var l=a(1),c=t(l),u=a(32),d=t(u),h=a(22),f=t(h),p=a(5),m=a(!function(){var t=new Error('Cannot find module "luui"');throw t.code="MODULE_NOT_FOUND",t}()),y=p.Utils.CurrencyUtils,v=p.Utils.Statistic,b=p.BCs.ProjectBannerWith2ColsReverse,k=p.BCs.KYCSimple,C=p.BCs.PanelDoc,g=p.BCs.Checkbox,w=function(t){function e(t){n(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t,{PVKey:"h5_confirminginvestment"}));return a.tradeConfirmCache=f["default"].TradeConfirmCache,a.investVoucherCache=f["default"].InvestVoucherCache,["gotoInvestTicketCallback","toggleCheckbox","comfirmInvest","checkInvest","getTradeConfirmInfo"].forEach(function(t){a[t]=a[t].bind(a)}),a.state={isDataReady:!1,titleName:"确认投资",btnActiveStatus:!1,projectInfo:{},kycData:{},panelData:{},disclaimerContent:"",contract:[]},a.data={},a}return o(e,t),s(e,[{key:"onBack",value:function(){this.clearTradeData(),r(Object.getPrototypeOf(e.prototype),"onBack",this).call(this)}},{key:"clearTradeData",value:function(){this.tradeConfirmCache.remove(),this.investVoucherCache.remove()}},{key:"componentWillMount",value:function(){var t=this,e={naviBar:{title:"确认投资"},leftView:!0};this.setTitle(e),this.getInitData(),this.getInitCache(),this.isBack?this.getTradeConfirmInfo(function(){t.getInvestVoucherInfo()}):(this.clearTradeData(),this.data.investType&&this.data.sid?this.getTradeConfirmInfo():this.checkUser(function(){t.checkInvest(function(){t.getTradeConfirmInfo()})}))}},{key:"getInitCache",value:function(){this.data.investType=this.tradeConfirmCache.getAttr("investType"),this.data.sid=this.tradeConfirmCache.getAttr("sid")}},{key:"getInvestVoucherInfo",
value:function(){this.data.hasChoickInvestVoucher=this.investVoucherCache.getAttr("hasChoickInvestVoucher"),this.data.investVoucherAmount=this.investVoucherCache.getAttr("investVoucherAmount"),this.data.investVoucherList=this.investVoucherCache.getAttr("investVoucherList")}},{key:"getInitData",value:function(){var t=this.getQuery(),e=JSON.parse(decodeURIComponent(t.params));this.data.productId=e.productId,this.data.amount=e.amount,this.data.source=e.source,this.data.salesArea=e.salesArea,this.data.productCategory=e.productCategory||"",this.data.ver=e.ver||"1.0",this.data.hasInsurance=e.hasInsurance||""}},{key:"checkUser",value:function(t){var e=this;d["default"].checkUser({},function(a){var n="1"===a.result.isNewUser?"01":"00";e.tradeConfirmCache.setAttr("investType",n),e.data.investType=n,t()},function(){})}},{key:"checkInvest",value:function(t){var e=this;d["default"].checkInvest({productId:this.data.productId,amount:this.data.amount,source:this.data.source,ver:this.data.ver,investType:this.data.investType,productCategory:this.data.productCategory},function(a){e.tradeConfirmCache.setAttr("sid",a.result.sid),e.data.sid=a.result.sid,t()},function(){})}},{key:"getTradeConfirmInfo",value:function(t){var e=this;d["default"].getTradeConfirmInfo({productId:this.data.productId,amount:this.data.amount,source:this.data.source,ver:this.data.ver,sid:this.data.sid},function(a){e.setViewData(a),e.state.isDataReady=!0,e.setState(e.state),t&&t()})}},{key:"setViewData",value:function(t){var e=this,a=t.result,n=a.product,i=a.trade;this.state.projectInfo={},this.state.projectInfo.productNameDisplay=n.name;var o=n.item,s=o.length;s>=1&&(this.state.projectInfo.row1={},this.state.projectInfo.row1.leftText=n.item[0].key,this.state.projectInfo.row1.leftValue=n.item[0].value,s>=2?(this.state.projectInfo.row1.rightText=n.item[1].key,this.state.projectInfo.row1.rightValue=n.item[1].value,s>=3&&(this.state.projectInfo.row2={},this.state.projectInfo.row2.leftText=n.item[2].key,this.state.projectInfo.row2.leftValue=n.item[2].value,s>=4?(this.state.projectInfo.row2.rightText=n.item[3].key,this.state.projectInfo.row2.rightValue=n.item[3].value,this.state.projectInfo.row2.type=" "):(this.state.projectInfo.row2.rightText=" ",this.state.projectInfo.row2.rightValue=" ",this.state.projectInfo.row2.type=" "))):(this.state.projectInfo.row1.rightText=" ",this.state.projectInfo.row1.rightValue=" "));var r=n.extra;this.state.kycData={riskLevel:r.riskLevel,riskLevelDesc:r.riskDescription||"本金收益稳定"};var l=i&&i.extra&&!!i.coinSize&&i.maxCoinUseAmount>0&&i.extra.maxCoinUseCount>0;this.data.investVoucherList=i.coinDetails,this.data.maxCoinUseAmount=i.maxCoinUseAmount,this.data.maxCoinUseCount=i.extra.maxCoinUseCount,this.state.panelData=[];var u={label:"投资金额",text:y.formatCurrencyWithTwoDecimal(this.data.amount)+"元"};this.state.panelData.push(u);var d=l?{label:"投资券抵扣",text:this.data.hasChoickInvestVoucher?"-"+y.formatCurrencyWithTwoDecimal(this.data.investVoucherAmount)+"元":"有可用",params:"",callback:this.gotoInvestTicketCallback}:{label:"投资券抵扣",text:"无可用"};this.state.panelData.push(d),this.data.paymentAmount=this.data.amount-(this.data.investVoucherAmount||0);var h={label:"实付金额",text:'<span class="TradeConfirm-amount">'+y.formatCurrencyWithTwoDecimal(this.data.paymentAmount)+"<span>元"};this.state.panelData.push(h),this.state.disclaimerContent=r.disclaimerContent;var f=a.contract,p=f.map(function(t,a){return c["default"].createElement("a",{key:a,onClick:e.clickContractCallback.bind(e,t)},0===a?"":"、","《",t.name,"》")}),m=c["default"].createElement("section",null,"本人已阅读",p,"，完全理解并接受上述文件的全部内容。本人的投资决策完全基于本人的独立自主判断做出，并自愿承担投资该项目所产生的相关风险和全部后果。");this.state.checkboxData={className:"TradeConfirm-checkbox-color",checkboxDefaultStatus:!1,checkedClass:"icon-checkbox",uncheckedClass:"icon-checkobxborder",callback:this.toggleCheckbox,content:m}}},{key:"clickContractCallback",value:function(t){var e=this;"html"===t.type?d["default"].getContract({url:t.link},function(a){e.forward("contract",{state:{title:t.name,type:t.type,html:a.result.contract}})}):"link"===t.type&&this.forward("contract",{state:{title:t.name,type:t.type,link:t.link}})}},{key:"gotoInvestTicketCallback",value:function(){v.logEvent({title:"h5_confirminginvestment_coupon",category:this.props.route.path}),this.forward("investmentVoucher",{state:{list:this.data.investVoucherList,maxCoinUseAmount:this.data.maxCoinUseAmount,maxCoinUseCount:this.data.maxCoinUseCount,paymentAmount:this.data.paymentAmount}})}},{key:"toggleCheckbox",value:function(t){this.setState({btnActiveStatus:t.status})}},{key:"comfirmInvest",value:function(){var t=this;d["default"].getPaymentInfo({productId:this.data.productId,source:this.data.source,ver:this.data.ver,coins:"",sid:this.data.sid,externalInfo:"",province:"",city:"",district:"",address:"",productCategory:this.data.productCategory||""},function(e){t.checkPaymentAndForward(e)})}},{key:"checkPaymentAndForward",value:function(t){v.logEvent({title:"h5_confirminginvestment_confirminginvestment",category:this.props.route.path});var e=t.result,a=e.payment,n=e.isSetPassword,i=e.supportedMethods;this.forward("payConfirm",{state:{payment:a,isSetPassword:n,supportedMethods:i,paymentAmount:this.data.paymentAmount,coins:this.data.coins,sid:this.data.sid,source:this.data.source,productId:this.data.productId,productCategory:this.data.productCategory,ver:this.data.ver}})}},{key:"render",value:function(){var t=this.state.isDataReady;if(!t)return null;var e=this.state.projectInfo,a=this.state.kycData,n=this.state.panelData,i=this.state.checkboxData;return c["default"].createElement("div",{className:"TradeConfirm"},c["default"].createElement("div",{className:"TradeConfirm-warning"},c["default"].createElement("span",null,"为了保障资金安全，请勿连接不可信的Wi-Fi")),c["default"].createElement("div",{className:"TradeConfirm-projinfo"},c["default"].createElement(b,{type:"TwoColReverse",projectInfo:e})),c["default"].createElement("div",{className:"TradeConfirm-kyc line-bottom"},c["default"].createElement(k,a)),c["default"].createElement("div",{className:"TradeConfirm-panel"},c["default"].createElement(C,{className:"TradeConfirm-DocPanel",body:n})),c["default"].createElement("div",{className:"TradeConfirm-checkbox"},c["default"].createElement(g,i)),c["default"].createElement("div",{className:"TradeConfirm-btn"},c["default"].createElement(m.Button,{name:"确认投资",inactive:!this.state.btnActiveStatus,className:"",callback:this.comfirmInvest})))}}]),e}(p.LuPage);e["default"]=w}).call(this)}finally{}},118:function(t,e,a){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();a(95);var r=a(1),l=t(r),c=a(32),u=t(c),d=a(22),h=t(d),f=a(5),p=a(!function(){var t=new Error('Cannot find module "luui"');throw t.code="MODULE_NOT_FOUND",t}()),m=f.Utils.CurrencyUtils,y=f.Utils.Platform,v=f.Utils.Statistic,b=f.BCs.TimeLine,k=f.BCs.ConfirmHeader,C=f.BCs.Download,g=function(t){function e(t){n(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t,{PVKey:"h5_investmentresult"}));return a.tradeConfirmCache=h["default"].TradeConfirmCache,a.payConfirmCache=h["default"].PayConfirmCache,a.investVoucherCache=h["default"].InvestVoucherCache,["btmLeftButtonCallback","btmRightButtonCallback","downloadCallback"].forEach(function(t){a[t]=a[t].bind(a)}),a.state={isDataReady:!1,status:"success",titleName:"提示",resultTitle:"",displayNameCode:"",investAmount:"1000",investFinishSteps:[]},a.data={},a}return o(e,t),s(e,[{key:"componentWillMount",value:function(){var t={naviBar:{title:"提示"},leftView:!0};this.setTitle(t),this.getInitData(),this.getInvestResult(),this.context.router.setRouteLeaveHook(this.props.route,this.onBack)}},{key:"onBack",value:function(){v.logEvent({title:"h5_investmentresultpage_done",category:this.props.route.path}),this.clearTradeData();var t="";if(y.isLU)t=this.data.enterDetailUrl;else{var e=encodeURIComponent(f.UrlManager.getUrl().list);t=this.data.enterDetailUrl+"#/productDetail?productId="+this.data.productId+"&channel="+this.data.source+"&from="+e}this.jump(t,{isBack:!0})}},{key:"clearTradeData",value:function(){this.tradeConfirmCache.remove(),this.payConfirmCache.remove(),this.investVoucherCache.remove()}},{key:"getInitData",value:function(){var t=this.getState();this.data.trxId=t.trxId,this.data.source=t.source,this.data.ver=t.ver,this.data.investmentRequestId=t.investmentRequestId,this.data.salesArea=t.salesArea}},{key:"getInvestResult",value:function(){var t=this;u["default"].getInvestResult({trxId:this.data.trxId,source:this.data.source,ver:this.data.ver,investmentRequestId:this.data.investmentRequestId,salesArea:""},function(e){t.setViewData(e)})}},{key:"setViewData",value:function(t){var e=t.result,a=e.extra.title,n=e.displayName,i=e.code,o=e.investAmount,s=e.extra.investFinishSteps;this.data.productId=e.productId,this.data.browseProductInfo=e.extra.browseProductInfo,this.data.enterMyProductList=e.extra.enterMyProductList,this.data.enterDetailUrl=e.extra.enterDetailUrl,this.setState({isDataReady:!0,resultTitle:a,displayNameCode:n+" "+i,investAmount:o,investFinishSteps:s})}},{key:"btmLeftButtonCallback",value:function(){var t=this.data.browseProductInfo.schemeUrl;this.jump(t)}},{key:"btmRightButtonCallback",value:function(){var t=this.data.enterMyProductList.schemeUrl;this.jump(t)}},{key:"downloadCallback",value:function(){v.logEvent({title:"h5_investmentresultpage_downloadapp",category:this.props.route.path})}},{key:"render",value:function(){var t=this.state,e=t.isDataReady,a=t.status,n=t.resultTitle,i=t.displayNameCode,o=t.investAmount,s=t.investFinishSteps;if(!e)return null;var r="success"===a,c=s.map(function(t,e){return{title:t.title,desc:t.result[0],success:0===e}}),u=null;this.data.browseProductInfo&&this.data.enterMyProductList&&(u=l["default"].createElement("div",{className:"TradeResult-buttons flex-hrz"},l["default"].createElement("div",{className:"flex-full TradeResult-left"},l["default"].createElement(p.Button,{className:"ButtonPage-button TradeResult-button",name:this.data.browseProductInfo.buttonTitle,callback:this.btmLeftButtonCallback,type:"Secondary"})),l["default"].createElement("div",{className:"flex-full TradeResult-right"},l["default"].createElement(p.Button,{className:"ButtonPage-button TradeResult-button",name:this.data.enterMyProductList.buttonTitle,callback:this.btmRightButtonCallback}))));var d=this.data.source,h=d.indexOf("H5_")>=0;return l["default"].createElement("div",{className:"TradeResult"},l["default"].createElement("div",{className:"TradeResult-success line-bottom "+(r?"":"hidden")},l["default"].createElement("div",{className:"TradeResult-confirmheader"},l["default"].createElement(k,{tip:n,subtip:m.formatCurrencyWithTwoDecimal(o)+"元 | "+i})),l["default"].createElement("div",{className:"TradeResult-progress"},l["default"].createElement(b,{itemData:c})),u),l["default"].createElement("div",{className:"TradeResult-failure line-bottom "+(r?"hidden":"")},l["default"].createElement("div",{className:"TradeResult-confirmheader"},l["default"].createElement(k,{status:"fail",tip:"投资未成功"})),l["default"].createElement("div",{className:"TradeResult-readme normal-color-1"},l["default"].createElement("span",null," 投资未成功提示")),u),l["default"].createElement("div",{className:"TradeResult-download"},h?l["default"].createElement(C,{downloadCallback:this.downloadCallback}):null))}}]),e}(f.LuPage);e["default"]=g}).call(this)}finally{}}});